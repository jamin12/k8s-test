# v4/ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: myapp-ingress
  annotations:
    # NGINX Ingress Controller를 사용할 때, 경로 재작성을 위한 표준 어노테이션입니다.
    nginx.ingress.kubernetes.io/rewrite-target: /
spec:
  # 이 인그레스 규칙을 처리할 Ingress Controller를 지정합니다.
  # 클러스터에 'nginx'라는 이름의 IngressClass 리소스가 생성되어 있어야 합니다.
  ingressClassName: nginx
  rules:
  - host: "myapp.example.com" # 이 호스트 이름으로 들어오는 요청에 대해
    http:
      paths:
      - path: / # 모든 경로의 요청을
        pathType: Prefix
        backend:
          service:
            name: myapp-service # myapp-service 서비스로
            port:
              number: 80 # 80번 포트로 전달합니다.
